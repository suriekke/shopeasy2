"use strict";(self.webpackChunkadmin_dashboard=self.webpackChunkadmin_dashboard||[]).push([[9],{9:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var a=t(43),i=t(1),r=t(459),c=t(995);const l=(0,c.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),n=(0,c.A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);var d=t(489);const x=(0,c.A)("ShieldOff",[["path",{d:"M19.7 14a6.9 6.9 0 0 0 .3-2V5l-8-3-3.2 1.2",key:"342pvf"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M4.7 4.7 4 5v7c0 6 8 10 8 10a20.3 20.3 0 0 0 5.62-4.38",key:"p0ycf4"}]]);var m=t(579);const o=()=>{const[e,s]=(0,a.useState)([]),[t,c]=(0,a.useState)(!0),[o,h]=(0,a.useState)("all");(0,a.useEffect)(()=>{u();const e=(0,i._9)(e=>{"INSERT"===e.eventType?s(s=>[...s,e.new]):"UPDATE"===e.eventType?s(s=>s.map(s=>s.id===e.new.id?e.new:s)):"DELETE"===e.eventType&&s(s=>s.filter(s=>s.id!==e.old.id))});return()=>e.unsubscribe()},[]);const u=async()=>{try{const{data:e,error:t}=await i.ND.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;s(e||[])}catch(e){console.error("Error fetching users:",e)}finally{c(!1)}},y="all"===o?e:"active"===o?e.filter(e=>e.is_active):e.filter(e=>!e.is_active);return t?(0,m.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"mb-8",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Users"}),(0,m.jsx)("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),(0,m.jsx)("div",{className:"mb-6",children:(0,m.jsxs)("div",{className:"flex space-x-2",children:[(0,m.jsxs)("button",{onClick:()=>h("all"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("all"===o?"bg-blue-100 text-blue-700":"bg-white text-gray-700 hover:bg-gray-50"),children:["All Users (",e.length,")"]}),(0,m.jsxs)("button",{onClick:()=>h("active"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("active"===o?"bg-green-100 text-green-700":"bg-white text-gray-700 hover:bg-gray-50"),children:["Active (",e.filter(e=>e.is_active).length,")"]}),(0,m.jsxs)("button",{onClick:()=>h("blocked"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("blocked"===o?"bg-red-100 text-red-700":"bg-white text-gray-700 hover:bg-gray-50"),children:["Blocked (",e.filter(e=>!e.is_active).length,")"]})]})}),(0,m.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,m.jsx)("ul",{className:"divide-y divide-gray-200",children:y.map(e=>(0,m.jsx)("li",{className:"px-6 py-4",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"flex-shrink-0",children:(0,m.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,m.jsx)(r.A,{className:"h-5 w-5 text-gray-600"})})}),(0,m.jsxs)("div",{className:"ml-4",children:[(0,m.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.full_name||"No Name"}),(0,m.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,m.jsx)(l,{className:"h-4 w-4 mr-1"}),e.email]}),(0,m.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,m.jsx)(n,{className:"h-4 w-4 mr-1"}),"Joined ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[e.is_admin&&(0,m.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Admin"}),(0,m.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Blocked"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)("button",{onClick:()=>(async(e,s)=>{try{const{error:t}=await i.ND.from("users").update({is_admin:!s}).eq("id",e);if(t)throw t}catch(t){console.error("Error updating admin status:",t)}})(e.id,e.is_admin),className:"p-2 rounded-md ".concat(e.is_admin?"text-purple-600 hover:text-purple-800":"text-gray-400 hover:text-gray-600"),title:e.is_admin?"Remove Admin":"Make Admin",children:e.is_admin?(0,m.jsx)(d.A,{className:"h-4 w-4"}):(0,m.jsx)(x,{className:"h-4 w-4"})}),(0,m.jsx)("button",{onClick:()=>(async(e,s)=>{try{const{error:t}=await i.ND.from("users").update({is_active:!s}).eq("id",e);if(t)throw t}catch(t){console.error("Error updating user status:",t)}})(e.id,e.is_active),className:"p-2 rounded-md ".concat(e.is_active?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"),title:e.is_active?"Block User":"Unblock User",children:e.is_active?(0,m.jsx)(x,{className:"h-4 w-4"}):(0,m.jsx)(d.A,{className:"h-4 w-4"})})]})]})]})},e.id))}),0===y.length&&(0,m.jsx)("div",{className:"text-center py-12",children:(0,m.jsx)("p",{className:"text-gray-500",children:"No users found"})})]})]})}},489:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(995).A)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])}}]);
//# sourceMappingURL=9.6a567035.chunk.js.map