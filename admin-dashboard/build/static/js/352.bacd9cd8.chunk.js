"use strict";(self.webpackChunkadmin_dashboard=self.webpackChunkadmin_dashboard||[]).push([[352],{352:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var r=s(43),a=s(1),l=s(995);const d=(0,l.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var n=s(990);const c=(0,l.A)("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),i=(0,l.A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var o=s(579);const x=()=>{const[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[x,m]=(0,r.useState)("all");(0,r.useEffect)(()=>{u();const e=(0,a.zo)(e=>{"INSERT"===e.eventType?t(t=>[e.new,...t]):"UPDATE"===e.eventType?t(t=>t.map(t=>t.id===e.new.id?e.new:t)):"DELETE"===e.eventType&&t(t=>t.filter(t=>t.id!==e.old.id))});return()=>e.unsubscribe()},[]);const u=async()=>{try{const{data:e,error:s}=await a.ND.from("orders").select("\n          *,\n          users:user_id(email, full_name)\n        ").order("created_at",{ascending:!1});if(s)throw s;t(e||[])}catch(e){console.error("Error fetching orders:",e)}finally{l(!1)}},h=e=>{switch(e){case"pending":return(0,o.jsx)(d,{className:"h-4 w-4 text-yellow-500"});case"packed":return(0,o.jsx)(n.A,{className:"h-4 w-4 text-blue-500"});case"shipped":return(0,o.jsx)(c,{className:"h-4 w-4 text-purple-500"});case"delivered":return(0,o.jsx)(i,{className:"h-4 w-4 text-green-500"});default:return(0,o.jsx)(d,{className:"h-4 w-4 text-gray-500"})}},p=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"packed":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},g="all"===x?e:e.filter(e=>e.status===x);return s?(0,o.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Orders"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Manage and track customer orders"})]}),(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsxs)("button",{onClick:()=>m("all"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("all"===x?"bg-blue-100 text-blue-700":"bg-white text-gray-700 hover:bg-gray-50"),children:["All Orders (",e.length,")"]}),(0,o.jsxs)("button",{onClick:()=>m("pending"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("pending"===x?"bg-yellow-100 text-yellow-700":"bg-white text-gray-700 hover:bg-gray-50"),children:["Pending (",e.filter(e=>"pending"===e.status).length,")"]}),(0,o.jsxs)("button",{onClick:()=>m("packed"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("packed"===x?"bg-blue-100 text-blue-700":"bg-white text-gray-700 hover:bg-gray-50"),children:["Packed (",e.filter(e=>"packed"===e.status).length,")"]}),(0,o.jsxs)("button",{onClick:()=>m("shipped"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("shipped"===x?"bg-purple-100 text-purple-700":"bg-white text-gray-700 hover:bg-gray-50"),children:["Shipped (",e.filter(e=>"shipped"===e.status).length,")"]}),(0,o.jsxs)("button",{onClick:()=>m("delivered"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("delivered"===x?"bg-green-100 text-green-700":"bg-white text-gray-700 hover:bg-gray-50"),children:["Delivered (",e.filter(e=>"delivered"===e.status).length,")"]})]})}),(0,o.jsxs)("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[(0,o.jsx)("ul",{className:"divide-y divide-gray-200",children:g.map(e=>{var t,s;return(0,o.jsxs)("li",{className:"px-6 py-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:h(e.status)}),(0,o.jsxs)("div",{className:"ml-4",children:[(0,o.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["Order #",e.id]}),(0,o.jsx)("div",{className:"text-sm text-gray-500",children:(null===(t=e.users)||void 0===t?void 0:t.full_name)||(null===(s=e.users)||void 0===s?void 0:s.email)}),(0,o.jsxs)("div",{className:"text-sm text-gray-500",children:["$",e.total_amount]}),(0,o.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]})]}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(p(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,o.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{const{error:s}=await a.ND.from("orders").update({status:t}).eq("id",e);if(s)throw s}catch(s){console.error("Error updating order status:",s)}})(e.id,t.target.value),className:"text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[(0,o.jsx)("option",{value:"pending",children:"Pending"}),(0,o.jsx)("option",{value:"packed",children:"Packed"}),(0,o.jsx)("option",{value:"shipped",children:"Shipped"}),(0,o.jsx)("option",{value:"delivered",children:"Delivered"})]})]})]}),e.items&&(0,o.jsxs)("div",{className:"mt-4 ml-8",children:[(0,o.jsx)("div",{className:"text-sm text-gray-500",children:"Items:"}),(0,o.jsx)("div",{className:"mt-2 space-y-1",children:e.items.map((e,t)=>(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:[e.name," - Qty: ",e.quantity]},t))})]})]},e.id)})}),0===g.length&&(0,o.jsx)("div",{className:"text-center py-12",children:(0,o.jsx)("p",{className:"text-gray-500",children:"No orders found"})})]})]})}}}]);
//# sourceMappingURL=352.bacd9cd8.chunk.js.map