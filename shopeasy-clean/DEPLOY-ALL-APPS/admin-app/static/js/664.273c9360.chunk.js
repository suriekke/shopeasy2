"use strict";(self.webpackChunkadmin_dashboard=self.webpackChunkadmin_dashboard||[]).push([[664],{664:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var r=s(43),a=s(555),i=s(579);const l="https://shopeasy-backend-tnkk.onrender.com",c=e=>{let{onProductAdded:t}=e;const[s,c]=(0,r.useState)({name:"",description:"",price:"",original_price:"",stock_quantity:"",category_id:"",image_url:"",unit:"piece",discount_percentage:"0",is_featured:!1}),[n,d]=(0,r.useState)([]),[o,u]=(0,r.useState)(!1),[x,m]=(0,r.useState)("");(0,r.useEffect)(()=>{p()},[]);const p=async()=>{try{const e=await fetch("".concat(l,"/api/categories"));if(e.ok){const t=await e.json();d(t.categories||[])}}catch(e){console.error("Error fetching categories:",e)}},g=e=>{const{name:t,value:s,type:r,checked:i}=e.target;c(e=>(0,a.A)((0,a.A)({},e),{},{[t]:"checkbox"===r?i:s}))};return(0,i.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Add New Product"}),x&&(0,i.jsx)("div",{className:"p-4 rounded-lg mb-4 ".concat(x.includes("\u2705")?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:x}),(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),m("");try{if(!s.name||!s.price||!s.category_id)throw new Error("Please fill in all required fields");const e=(0,a.A)((0,a.A)({},s),{},{price:parseFloat(s.price),original_price:s.original_price?parseFloat(s.original_price):null,stock_quantity:parseInt(s.stock_quantity)||0,discount_percentage:parseFloat(s.discount_percentage)||0}),r=await fetch("".concat(l,"/api/products"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){const e=await r.json();throw new Error(e.message||"Failed to add product")}const i=await r.json();m("\u2705 Product added successfully!"),c({name:"",description:"",price:"",original_price:"",stock_quantity:"",category_id:"",image_url:"",unit:"piece",discount_percentage:"0",is_featured:!1}),t&&t(i.product)}catch(r){m("\u274c Error: ".concat(r.message))}finally{u(!1)}},className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),(0,i.jsx)("input",{type:"text",name:"name",value:s.name,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter product name"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,i.jsx)("textarea",{name:"description",value:s.description,onChange:g,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter product description"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (\u20b9) *"}),(0,i.jsx)("input",{type:"number",name:"price",value:s.price,onChange:g,required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Price (\u20b9)"}),(0,i.jsx)("input",{type:"number",name:"original_price",value:s.original_price,onChange:g,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock Quantity"}),(0,i.jsx)("input",{type:"number",name:"stock_quantity",value:s.stock_quantity,onChange:g,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,i.jsxs)("select",{name:"category_id",value:s.category_id,onChange:g,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"Select Category"}),n.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image URL"}),(0,i.jsx)("input",{type:"url",name:"image_url",value:s.image_url,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/image.jpg"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,i.jsxs)("select",{name:"unit",value:s.unit,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"piece",children:"Piece"}),(0,i.jsx)("option",{value:"kg",children:"Kilogram"}),(0,i.jsx)("option",{value:"gram",children:"Gram"}),(0,i.jsx)("option",{value:"liter",children:"Liter"}),(0,i.jsx)("option",{value:"ml",children:"Milliliter"}),(0,i.jsx)("option",{value:"pack",children:"Pack"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount (%)"}),(0,i.jsx)("input",{type:"number",name:"discount_percentage",value:s.discount_percentage,onChange:g,min:"0",max:"100",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0"})]})]}),(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",name:"is_featured",checked:s.is_featured,onChange:g,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,i.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Featured Product"})]}),(0,i.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:o?"Adding Product...":"Add Product"})]})]})},n="https://shopeasy-backend-tnkk.onrender.com",d=()=>{const[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[o,u]=(0,r.useState)(!1),[x,m]=(0,r.useState)(""),[p,g]=(0,r.useState)("");(0,r.useEffect)(()=>{h(),y()},[]);const h=async()=>{try{d(!0);const e=await fetch("".concat(n,"/api/products"));if(e.ok){const s=await e.json();t(s.products||[])}else console.error("Failed to fetch products")}catch(e){console.error("Error fetching products:",e)}finally{d(!1)}},y=async()=>{try{const e=await fetch("".concat(n,"/api/categories"));if(e.ok){const t=await e.json();a(t.categories||[])}}catch(e){console.error("Error fetching categories:",e)}},b=e=>{t(t=>[e,...t]),u(!1)},f=e.filter(e=>{var t;const s=e.name.toLowerCase().includes(x.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase())),r=!p||e.category_id===p;return s&&r});return o?(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Product"}),(0,i.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"\u2190 Back to Products"})]}),(0,i.jsx)(c,{onProductAdded:b})]}):(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Products Management"}),(0,i.jsx)("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"+ Add Product"})]}),(0,i.jsxs)("div",{className:"mb-6 flex flex-wrap gap-4",children:[(0,i.jsx)("div",{className:"flex-1 min-w-64",children:(0,i.jsx)("input",{type:"text",placeholder:"Search products...",value:x,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,i.jsx)("option",{value:"",children:"All Categories"}),s.map(e=>(0,i.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,i.jsx)("button",{onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"\ud83d\udd04 Refresh"})]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l?(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,i.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading products..."})]}):0===f.length?(0,i.jsx)("div",{className:"p-8 text-center text-gray-500",children:(0,i.jsxs)("p",{children:["No products found. ",x||p?"Try adjusting your filters.":"Add your first product!"]})}):(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>{var r;const a=s.find(t=>t.id===e.category_id);return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"flex-shrink-0 h-12 w-12",children:(0,i.jsx)("img",{className:"h-12 w-12 rounded-lg object-cover",src:e.image_url||"/placeholder.jpg",alt:e.name,onError:e=>{e.target.src="/placeholder.jpg"}})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,i.jsxs)("div",{className:"text-sm text-gray-500",children:[null===(r=e.description)||void 0===r?void 0:r.substring(0,60),"..."]})]})]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:(null===a||void 0===a?void 0:a.name)||"Unknown"})}),(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,i.jsxs)("div",{className:"text-sm text-gray-900",children:["\u20b9",e.price]}),e.original_price&&(0,i.jsxs)("div",{className:"text-sm text-gray-500 line-through",children:["\u20b9",e.original_price]}),e.discount_percentage>0&&(0,i.jsxs)("div",{className:"text-xs text-green-600",children:[e.discount_percentage,"% OFF"]})]}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"text-sm ".concat(e.stock_quantity>10?"text-green-600":e.stock_quantity>0?"text-yellow-600":"text-red-600"),children:[e.stock_quantity," ",e.unit]})}),(0,i.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,i.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Active":"Inactive"}),e.is_featured&&(0,i.jsx)("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Featured"})]}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,i.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this product?"))try{(await fetch("".concat(n,"/api/products/").concat(e),{method:"DELETE"})).ok?t(t=>t.filter(t=>t.id!==e)):alert("Failed to delete product")}catch(s){console.error("Error deleting product:",s),alert("Error deleting product")}})(e.id),className:"text-red-600 hover:text-red-900 ml-4",children:"Delete"})})]},e.id)})})]})})}),(0,i.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Total Products"})]}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.is_active).length}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Active Products"})]}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.filter(e=>e.stock_quantity<=10&&e.stock_quantity>0).length}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Low Stock"})]}),(0,i.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.filter(e=>0===e.stock_quantity).length}),(0,i.jsx)("div",{className:"text-sm text-gray-600",children:"Out of Stock"})]})]})]})}}}]);
//# sourceMappingURL=664.273c9360.chunk.js.map